<?php

// header('Content-Type: text/html; charset=utf-8');
// –ø–æ–¥—Ä—É–±–∞–µ–º API
// require_once("vendor/autoload.php");
require_once "vendor/autoload.php";
require_once "CodesGetter.php";

// if(true){
// 	error_reporting(E_ALL & ~(E_NOTICE | E_USER_NOTICE | E_DEPRECATED));
// 	ini_set('display_errors', 1);
// }

// —Å–æ–∑–¥–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –±–æ—Ç–∞
// $tg_bot_api_token = "";

// https://t.me/suremasu_bot
$tg_bot_api_token = "";

// https://t.me/new_suremasu_bot
// $tg_bot_api_token = "";

// $bot = new \TelegramBot\Api\BotApi($tg_bot_api_token);
$bot = new \TelegramBot\Api\Client($tg_bot_api_token);

// $bot->sendMessage(178188001, "–Ø –∂–∏–≤");

try {

    // Handle /ping command
    $bot->command('ping', function ($message) use ($bot) {
        $bot->sendMessage($message->getChat()->getId(), 'pong!');
    });
    
    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ /start
    $bot->command('start', function ($message) use ($bot) {
        $user_id         = $message->getChat()->getId();
        
        $welcome_msg = "Good day, commander! Choose a language:\n\n–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º! –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫:";
        // –ö–ª–∞–≤–∞ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≤—ã—Å–æ—Ç—É –ø–æ–¥ –∫–æ–ª-–≤–æ –∫–Ω–æ–ø–æ–∫. –ù–ï –∏—Å—á–µ–∑–∞–µ—Ç –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è
        $reply_keyboard_leng = new \TelegramBot\Api\Types\ReplyKeyboardMarkup([['üá∑üá∫ –†–£–°–°–ö–ò–ô'], ['üá¨üáß ENGLISH']], null, true);
        // $bot->sendMessage($user_id, "Welcome!\n–ü—Ä–∏–≤–µ—Ç!",false, null, null, $reply_keyboard_leng);
        $bot->sendMessage($user_id, $welcome_msg,false, null, null, $reply_keyboard_leng);
    });

    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è-–æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ—Å—Ç—É–ø–∞—é—â–∏–µ –æ—Ç reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    $bot->on(function (\TelegramBot\Api\Types\Update $update) use ($bot) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –µ–≥–æ
        if ($update->getEditedMessage()) {
            return;
        }

        $message        = $update->getMessage();
        $message_text   = $message->getText();
        $user_id        = $message->getChat()->getId();
        // $info_key_ru    = '‚ùì –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è';
        // $info_key_en    = '‚ùì Info';
        
        // –ú–∞—Å—Å–∏–≤ —Å –Ω–∞–¥–ø–∏—Å—è–º–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        $info_key = [
            "ru" => '‚ùì –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è',
            "en" => '‚ùì Info',
        ];
        $demo_key = [
            "ru" => 'üîß –ü–æ–ª—É—á–∏—Ç—å –¥–µ–º–æ –¥–æ—Å—Ç—É–ø',
            "en" => 'üîß I need demo access',
        ];
        
        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ—Å—Ç—É–ø–∏–≤—à–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —è–∑—ã–∫–æ–º
        if(strcasecmp($message_text, 'üá∑üá∫ –†–£–°–°–ö–ò–ô') == 0)   // –ë–∏–Ω–∞—Ä–Ω–æ-–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –±–µ–∑ —É—á—ë—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞
        {
            $info_msg_text = '–≠—Ç–æ —Å–µ—Ä–≤–∏—Å –ø–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—é –¥–µ–º–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—É `Trend Breaking Level` (–¥–ª—è TradingView)!';
            
            // –°–æ–∑–¥–∞—ë–º –Ω–µ –∏—Å—á–µ–∑–∞—é—â—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –¥–≤—É–º—è —Ä—è–¥–∞–º–∏ –∫–Ω–æ–ø–æ–∫
            $reply_keyboard = new \TelegramBot\Api\Types\ReplyKeyboardMarkup([[$demo_key['ru']], [$info_key['ru']]], null, true);
            
            $bot->sendMessage($user_id, $info_msg_text, false, null, null, $reply_keyboard);
            // $bot->sendMessage($user_id, '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!', false, null, null, $reply_keyboard);
        }
        else if(strcasecmp($message_text, 'üá¨üáß ENGLISH') == 0)
        {
            $info_msg_text = 'This is a service for providing demo access to `Trend Breaking Level` indicator (for TradingView)!';
            
            // –°–æ–∑–¥–∞—ë–º –Ω–µ –∏—Å—á–µ–∑–∞—é—â—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –¥–≤—É–º—è —Ä—è–¥–∞–º–∏ –∫–Ω–æ–ø–æ–∫
            $reply_keyboard = new \TelegramBot\Api\Types\ReplyKeyboardMarkup([[$demo_key['en']], [$info_key['en']]], null, true);
            
            $bot->sendMessage($user_id, $info_msg_text, false, null, null, $reply_keyboard);
            // $bot->sendMessage($user_id, 'Good day, commander!', false, null, null, $reply_keyboard);
        }
        
        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ—Å—Ç—É–ø–∏–≤—à–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ '‚ùì –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'
        
        // –û–±—ä—è–≤–ª—è–µ–º –Ω–∞–±–æ—Ä —Å—Å—ã–ª–æ–∫
        $overview_url   = 'https://www.tradingview.com/chart/CL1!/WpLFZtrb-Demonstration-of-the-indicator-Trend-Breaking-Level-TBL/';
        $tg_channel_url = 'https://t.me/suremasu';
        $website_url    = 'https://surema.su';
        
        // if(strcasecmp($message_text, '‚ùì –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è') == 0) 
        if(strcasecmp($message_text, $info_key['ru']) == 0)
        {
            $info_msg_text = '–ù–µ–º–Ω–æ–≥–æ –ø–æ–ª–µ–∑–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:';
            // $info_msg_text = '–≠—Ç–æ —Å–µ—Ä–≤–∏—Å –ø–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—é –¥–µ–º–æ –¥–æ—Å—Ç—É–ø–∞ –∫ TradingView-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—É Trend Breaking Level (TBL)!';
            $inline_keyboard = new \TelegramBot\Api\Types\Inline\InlineKeyboardMarkup(
                    [
                        [
                            ['text' => '–û–±–∑–æ—Ä –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ', 'url' => $overview_url]
                        ],
                        [
                            ['text' => '–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é', 'url' => $website_url]
                        ],
                        [
                            ['text' => '–î–û–°–¢–£–ü –ö –ü–û–õ–ù–û–ô –í–ï–†–°–ò–ò', 'url' => $tg_channel_url]
                        ]
                    ]
                );
            $bot->sendMessage($user_id, $info_msg_text , null, false, null, $inline_keyboard);
        }
        // else if(strcasecmp($message_text, '‚ùì Info' )== 0)   
        else if(strcasecmp($message_text, $info_key['en']) == 0)
        {
            $info_msg_text = 'Some useful information:';
            // $info_msg_text = 'This is a service for providing demo access to Trend Breaking Level (TBL) indicator (for TradingView)!';
            $inline_keyboard = new \TelegramBot\Api\Types\Inline\InlineKeyboardMarkup(
                    [
                        [
                            ['text' => 'Overview the indicator on the chart', 'url' => $overview_url]
                        ],
                        [
                            ['text' => 'User manual', 'url' => $website_url]
                        ],
                        [
                            ['text' => 'GET FULL VERSION', 'url' => $tg_channel_url]
                        ]
                    ]
                );
            $bot->sendMessage($user_id, $info_msg_text , null, false, null, $inline_keyboard);
        }
        
        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ—Å—Ç—É–ø–∏–≤—à–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 'üîß –ü–æ–ª—É—á–∏—Ç—å –¥–µ–º–æ –¥–æ—Å—Ç—É–ø' 
        
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –¥–µ–º–æ –≤–µ—Ä—Å–∏—é –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
        $demo_indicator_url = 'https://www.tradingview.com/script/4QoynGNS-demo-Trend-Breaking-Level-TBL/';

        // if(strcasecmp($message_text, 'üîß –ü–æ–ª—É—á–∏—Ç—å –¥–µ–º–æ –¥–æ—Å—Ç—É–ø') == 0) 
        if(strcasecmp($message_text, $demo_key['ru']) == 0) 
        {
            // –ó–∞–¥–∞—ë–º –∞–π–¥–∏ –≥—Ä—É–ø–ø—ã, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–æ–≤–µ—Ä—è–µ–º. (—Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ int). –ò–º—è –º–æ–∂–Ω–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: @channelusername
            // $target_group_id = '-1001845418299';                             
            $target_group_id = '@suremasu';
            
            // –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç—É—Å —é–∑–µ—Ä–∞ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ $target_group_id
            // NOTE: –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—É—Å—ã —é–∑–µ—Ä–∞: ‚Äúcreator‚Äù, ‚Äúadministrator‚Äù, ‚Äúmember‚Äù, ‚Äúrestricted‚Äù, ‚Äúleft‚Äù or ‚Äúkicked‚Äù
            $user_status = $bot->getChatMember($target_group_id, $user_id)->getStatus(); 
            
            // C—Ç–∞—Ç—É—Å —é–∑–µ—Ä–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–∞–∫ –º–∏–Ω–∏–º—É–º member, —Ç.–∫. –∞–¥–º–∏–Ω—ã –Ω–µ –≤ —Å—á—ë—Ç
            if (strcasecmp($user_status, 'creator') == 0 || strcasecmp($user_status, 'member') == 0)
            {
                if (!checkUser($user_id))
                {
                    // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥ –∏–∑ –ë–î
                    $ver_code   =   getVrfCode();

                    // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ —Å —Å—Å—ã–ª–∫–æ–π
                    $inline_keyboard = new \TelegramBot\Api\Types\Inline\InlineKeyboardMarkup(
                            [
                                [
                                    ['text' => '–î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞ –≥—Ä–∞—Ñ–∏–∫', 'url' => $demo_indicator_url]
                                ]
                            ]
                        );
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                    $bot->sendMessage($user_id, '–î–µ—Ä–∂–∏ –∫–ª—é—á –¥–µ–º–æ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ 3 –¥–Ω—è: ');
                    
                    //–ö–ª—é—á –¥–æ—Å—Ç—É–ø–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —ç—Ç–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏:
                    $bot->sendMessage($user_id, $ver_code, null, false, null, $inline_keyboard); 
                    // $bot->sendMessage($user_id, '–î–æ–±–∞–≤—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞ –≥—Ä–∞—Ñ–∏–∫ –∏ –≤–≤–µ–¥–∏ –∫–ª—é—á', null, false, null, $reply_keyboard);
                }
                else
                {
                    $info_msg_text_ = '–¢—ã —É–∂–µ –ø–æ–ª—É—á–∞–ª –¥–µ–º–æ –¥–æ—Å—Ç—É–ø!';
                    $inline_keyboard = new \TelegramBot\Api\Types\Inline\InlineKeyboardMarkup(
                            [
                                [
                                    ['text' => '–û—Ñ–æ—Ä–º–∏ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –ø–æ–ª–Ω—É—é –≤–µ—Ä—Å–∏—é', 'url' => $tg_channel_url]
                                ]
                            ]
                        );
                    $bot->sendMessage($user_id, $info_msg_text_ , null, false, null, $inline_keyboard);
                    // $bot->sendMessage($user_id, '–¢—ã —É–∂–µ –ø–æ–ª—É—á–∏–ª —Å–≤–æ–π –∫–æ–¥. –ü–æ–∫—É–ø–∞–π –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø!');
                }
                // ‚Äî‚ÄîD‚ÄîE‚ÄîB‚ÄîU‚ÄîG‚Äî‚Äî‚ÄîS‚ÄîE‚ÄîC‚ÄîT‚ÄîI‚ÄîO‚ÄîN‚Äî‚Äî
                // $bot->sendMessage($user_id, 'You are: '.$res->getStatus());
            }
            else
            {
                // $bot->sendMessage($user_id, '–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –Ω–∞—à –∫–∞–Ω–∞–ª https://t.me/bbcdfgg –∏ –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞!');
                $bot->sendMessage($user_id, '–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –Ω–∞—à –∫–∞–Ω–∞–ª @suremasu –∏ –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞!');

                // $reply_keyboard = new \TelegramBot\Api\Types\Inline\InlineKeyboardMarkup(
                //         [
                //             [
                //                 ['text' => '@bbcdfgg', 'url' => 'https://t.me/bbcdfgg']
                //             ]
                //         ]
                //     );
                // $bot->sendMessage($user_id, '–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –Ω–∞—à –∫–∞–Ω–∞–ª –∏ –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞!', null, false, null, $reply_keyboard);
            }
        }
        else if(strcasecmp($message_text, $demo_key['en']) == 0) 
        {
            // –ó–∞–¥–∞—ë–º –∞–π–¥–∏ –≥—Ä—É–ø–ø—ã, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–æ–≤–µ—Ä—è–µ–º. (—Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ int). –ò–º—è –º–æ–∂–Ω–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: @channelusername
            // $target_group_id = '-1001845418299';                             
            $target_group_id = '@suremasu';
            
            // –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç—É—Å —é–∑–µ—Ä–∞ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ $target_group_id
            // NOTE: –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—É—Å—ã —é–∑–µ—Ä–∞: ‚Äúcreator‚Äù, ‚Äúadministrator‚Äù, ‚Äúmember‚Äù, ‚Äúrestricted‚Äù, ‚Äúleft‚Äù or ‚Äúkicked‚Äù
            $user_status = $bot->getChatMember($target_group_id, $user_id)->getStatus(); 
            
            // C—Ç–∞—Ç—É—Å —é–∑–µ—Ä–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–∞–∫ –º–∏–Ω–∏–º—É–º member, —Ç.–∫. –∞–¥–º–∏–Ω—ã –Ω–µ –≤ —Å—á—ë—Ç
            if (strcasecmp($user_status, 'creator') == 0 || strcasecmp($user_status, 'member') == 0)
            {
                if (!checkUser($user_id))
                {
                    // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥ –∏–∑ –ë–î
                    $ver_code   =   getVrfCode();

                    // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ —Å —Å—Å—ã–ª–∫–æ–π
                    $inline_keyboard = new \TelegramBot\Api\Types\Inline\InlineKeyboardMarkup(
                            [
                                [
                                    ['text' => 'Add indicator to the chart', 'url' => $demo_indicator_url]
                                ]
                            ]
                        );
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                    $bot->sendMessage($user_id, 'Take the demo access code for 3 days: ');
                    //–ö–ª—é—á –¥–æ—Å—Ç—É–ø–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —ç—Ç–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏:
                    $bot->sendMessage($user_id, $ver_code, null, false, null, $inline_keyboard); 
                    // $bot->sendMessage($user_id, '–î–æ–±–∞–≤—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞ –≥—Ä–∞—Ñ–∏–∫ –∏ –≤–≤–µ–¥–∏ –∫–ª—é—á', null, false, null, $reply_keyboard);
                }
                else
                    $info_msg_text_ = 'You have already get demo access!';
                    $inline_keyboard = new \TelegramBot\Api\Types\Inline\InlineKeyboardMarkup(
                            [
                                [
                                    ['text' => 'Subscribe to full version', 'url' => $tg_channel_url]
                                ]
                            ]
                        );
                    $bot->sendMessage($user_id, $info_msg_text_ , null, false, null, $inline_keyboard);
                    // $bot->sendMessage($user_id, 'You have already received your code. Buy full access!');
                
                // ‚Äî‚ÄîD‚ÄîE‚ÄîB‚ÄîU‚ÄîG‚Äî‚Äî‚ÄîS‚ÄîE‚ÄîC‚ÄîT‚ÄîI‚ÄîO‚ÄîN‚Äî‚Äî
                // $bot->sendMessage($user_id, 'You are: '.$res->getStatus());
            }
            else
            {
                // $bot->sendMessage($user_id, '–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –Ω–∞—à –∫–∞–Ω–∞–ª https://t.me/bbcdfgg –∏ –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞!');
                $bot->sendMessage($user_id, 'First subscribe to our @suremasu channel and try again!');
                
                // $reply_keyboard = new \TelegramBot\Api\Types\Inline\InlineKeyboardMarkup(
                //         [
                //             [
                //                 ['text' => '@bbcdfgg', 'url' => 'https://t.me/bbcdfgg']
                //             ]
                //         ]
                //     );
                // $bot->sendMessage($user_id, '–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –Ω–∞—à –∫–∞–Ω–∞–ª –∏ –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞!', null, false, null, $reply_keyboard);
            }
        }
        
        // ‚Äî‚ÄîD‚ÄîE‚ÄîB‚ÄîU‚ÄîG‚Äî‚Äî‚ÄîS‚ÄîE‚ÄîC‚ÄîT‚ÄîI‚ÄîO‚ÄîN‚Äî‚Äî
        if(strcasecmp($message_text, '031213') == 0)
        {
            $reply_keyboard = new \TelegramBot\Api\Types\ReplyKeyboardMarkup([['‚ùì –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'], ['üîß –ü–æ–ª—É—á–∏—Ç—å –¥–µ–º–æ –¥–æ—Å—Ç—É–ø']], null, true);
            if (ClearUserDb() != null)
    	   	    $bot->sendMessage($user_id, "–§–∞–π–ª users_db —É—Å–ø–µ—à–Ω–æ –æ—á–∏—â–µ–Ω!", false, null, null, $reply_keyboard);
	   	    else
    	   	    $bot->sendMessage($user_id, "–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∞ —Ñ–∞–π–ª–∞ users_db", false, null, null, $reply_keyboard);
        }

        // strcasecmp ‚Äî –ë–∏–Ω–∞—Ä–Ω–æ-–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –±–µ–∑ —É—á—ë—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞
        if(strcasecmp($message_text, '1') == 0)
        {
            $reply_keyboard = new \TelegramBot\Api\Types\ReplyKeyboardMarkup(array(array("one", "two", "three")), true);
    	   	$bot->sendMessage($user_id, "ReplyKeyboardMarkup:",null, false, null, $reply_keyboard);
    	   //	$bot->sendMessage($user_id, 'Lol kek');
        }
        if(strcasecmp($message_text, '2') == 0)
        {
            // –Ω–µ –∏—Å—á–µ–∑–∞–µ—Ç –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞
            $reply_keyboard = new \TelegramBot\Api\Types\ReplyKeyboardMarkup([['‚è™ –ù–∞–∑–∞–¥']], null, true);
    	   	$bot->sendMessage($user_id, "–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä—É:",false, null, null, $reply_keyboard);

        }
        if(strcasecmp($message_text, '3') == 0)
        {
            $res = $bot->getChatMember('-1001845418299',$user_id);
            if (strcasecmp($res->getStatus(), 'creator') == 0 || strcasecmp($res->getStatus(), 'member') == 0)
    	   	    $bot->sendMessage($user_id, 'You are: '.$res->getStatus());
            
        }
        if(strcasecmp($message_text, '4') == 0)
        {
            $reply_keyboard = new \TelegramBot\Api\Types\ReplyKeyboardMarkup([['‚úÖ –í–∫–ª—é—á–∏—Ç—å', '‚õî –í—ã–∫–ª—é—á–∏—Ç—å'], ['‚ùì–°—Ç–∞—Ç—É—Å','üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞'],['üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏']], null, true);
            $bot->sendMessage($user_id, 'keyboard', false, null, null, $reply_keyboard);
        }
        // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî

        // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
        // $bot->sendMessage($user_id, 'Your message: ' . $message->getText());
    }, function () {
        return true;
    });
    
    $bot->run();

} catch (\TelegramBot\Api\Exception $e) {
    $e->getMessage();
}

?>
